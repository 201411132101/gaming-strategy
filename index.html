<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title> 兰斯8攻略 </title>

    <link rel="shortcut icon" href="https://bufan.xyz/favicon.ico">

    <!-- css -->
    <link href="https://bufan.xyz/css/public-style.css" rel="stylesheet" type="text/css" />
    <style>
        #container {
            width: 80%;
            margin: 50px auto;
            margin-bottom: 200px;
        }
        #rance8 {
            position: fixed;
            left: 10%;
            top: 180px;
        }
    </style>
</head>

<body>

<canvas id="rance8" width="105" height="105">
    Your browser does not support the HTML5 canvas tag.
</canvas>

<div id="container">
    <h1 align="center"> 兰斯8攻略 </h1>
    <br/>
    <table align="center">
        <tr>
            <th> 编号 </th>
            <th> 任务名字 </th>
            <th> 地图 </th>
            <th> 攻略 </th>
        </tr>
        <tr>
            <td> 121 </td>
            <td> 玛鲁古利多迷宫第 1 层 </td>
            <td> <a href="javascript:load_map(['1111', '0011', '0010', '00000'],
                                      ['111', '001', '000', '000'],
                                      ['0010', '0010', '0000'],
                                      [1, 1], [2, 4]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                1-3 有熊(队伍成员小于等于2个)和圆美(带熊来这),
                2-3 有魔想(不带兰斯来这), 超强力法师, 尽早入手,
                3-3 有碎片 A,
                2-4 有脱出点.
                BOSS 是 3 哈尼 + 2 乌比.
            </td>
        </tr>
        <tr>
            <td> 122 </td>
            <td> 玛鲁古利多迷宫第 2 层 </td>
            <td> <a href="javascript:load_map(['1111', '0110', '0110', '0000'],
                                      ['111', '010', '010', '000'],
                                      ['0100', '0100', '0000'],
                                      [1, 1], [2, 3]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                1-4 有碎片 B,
                2-3 有碎片 C,
                3-3 有目录,
                2-4 有脱出点. 
                BOSS 是 3 奥兹 + 2 赤目.
            </td>
        </tr>
        <tr>
            <td> 123 </td>
            <td> 玛鲁古利多迷宫第 3 层 </td>
            <td> <a href="javascript:load_map(['1110', '1111', '0001', '0011'],
                                      ['110', '111', '000', '001'],
                                      ['1000', '0001', '0001'],
                                      [2, 3], [1, 3]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                3-4 有目录,
                4-3 有碎片 A,
                4-4 有脱出点. 
                BOSS 是 3 武士 + 2 女仆.
            </td>
        </tr>
        <tr>
            <td> 124 </td>
            <td> 玛鲁古利多迷宫第 4 层 </td>
            <td> <a href="javascript:load_map(['1111', '1100', '0111', '0111'],
                                      ['111', '100', '011', '011'],
                                      ['0100', '0100', '0100'],
                                      [2, 2], [3, 4]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                1-3 有玛利亚(带上兰斯和魔想),
                1-4 有碎片 B,
                2-1 有碎片 C,
                3-2 有目录,
                1-1, 4-3 有脱出点.
                BOSS 是 2 坦克 + 2 灵体 + 1 女怪.
            </td>
        </tr>
        <tr>
            <td> 125 </td>
            <td> 玛鲁古利多迷宫第 5 层 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1111', '1000'],
                                      ['011', '000', '111', '000'],
                                      ['1101', '1101', '1000'],
                                      [1, 1], [1, 2]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                4-1 有碎片 A,
                1-2 有脱出点.
                BOSS 是 2 哈尼.
            </td>
        </tr>
    </table>
</div>

</body>


<script>
    var canvas = document.getElementById("rance8");
    var ctx = canvas.getContext('2d');

    ctx.strokeRect(0, 0, 105, 105);

    for (var r = 0; r < 4; r++)
        for (var c = 0; c < 4; c++)
            ctx.strokeRect(25*c+5, 25*r+5,  20, 20);

    function load_map(exist, link_r, link_c, start, end) {
        ctx.clearRect(0, 0, 105, 105);
        ctx.strokeRect(1, 1, 103, 103);

        // 多次绘制加深线条
        for (var i = 0; i < 5; i++)
            repeat_load(exist, link_r, link_c, start, end);
    }
    function repeat_load(exist, link_r, link_c, start, end) {
        ctx.fillStyle = "rgba(135, 206, 250, 0.5)";
        for (var r = 0; r < 4; r++)
            for (var c = 0; c < 4; c++) {
                if (exist[r][c] == '1')
                    ctx.fillRect(25*c+5, 25*r+5, 20, 20);
                ctx.strokeRect(25*c+5, 25*r+5,  20, 20);
            }

        for (var r = 0; r < 4; r++)
            for (var c = 0; c < 3; c++)
                if (link_r[r][c] == '1') {
                    ctx.strokeRect(25*(c+1), 25*r+12, 5, 6);
                    ctx.clearRect(25*(c+1)-1, 25*r+13, 7, 4);
                }

        for (var r = 0; r < 3; r++)
            for (var c = 0; c < 4; c++)
                if (link_c[r][c] == '1') {
                    ctx.strokeRect(25*c+12, 25*(r+1), 6, 5);
                    ctx.clearRect(25*c+13, 25*(r+1)-1, 4, 7);
                }

        ctx.fillStyle = "#EEB422";
        ctx.fillRect(25*(start[1]-1)+8, 25*(start[0]-1)+8, 14, 14);

        ctx.fillStyle = "black";
        ctx.font = "16px Georgia";
        ctx.fillText("G", 25*(end[1]-1)+9, 25*end[0]-4);
    }
</script>
