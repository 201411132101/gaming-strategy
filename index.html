<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title> 兰斯8攻略 </title>

    <link rel="shortcut icon" href="favicon.ico">

    <!-- css -->
    <link href="css/public-style.css" rel="stylesheet" type="text/css" />
    <style>
        #container {
            width: 80%;
            margin: 50px auto;
            margin-bottom: 200px;
        }
        #rance8 {
            position: fixed;
            left: 10%;
            top: 180px;
        }
    </style>
</head>

<body>

<canvas id="rance8" width="105" height="105">
    Your browser does not support the HTML5 canvas tag.
</canvas>

<div id="container">
    <h1 align="center"> 兰斯8攻略 </h1>
    <br/>
    <table align="center">
        <tr>
            <th> 编号 </th>
            <th> 地图 </th>
            <th> 攻略 </th>
        </tr>
        <tr>
            <td> 001 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1101', '1000'],
                                      ['111', '100', '100', '000'],
                                      ['1001', '1001', '1000'],
                                      [1, 1], [4, 1]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                待补
            </td>
        </tr>
        <tr>
            <td> 002 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1101', '1000'],
                                      ['111', '100', '100', '000'],
                                      ['1001', '1001', '1000'],
                                      [1, 1], [4, 1]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                待补
            </td>
        </tr>
        <tr>
            <td> 003 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1101', '1000'],
                                      ['111', '100', '100', '000'],
                                      ['1001', '1001', '1000'],
                                      [1, 1], [4, 1]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                待补
            </td>
        </tr>
        <tr>
            <td> 004 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1101', '1000'],
                                      ['111', '100', '100', '000'],
                                      ['1001', '1001', '1000'],
                                      [1, 1], [4, 1]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                待补
            </td>
        </tr>
        <tr>
            <td> 005 </td>
            <td> <a href="javascript:load_map(['1111', '1101', '1101', '1000'],
                                      ['111', '100', '100', '000'],
                                      ['1001', '1001', '1000'],
                                      [1, 1], [4, 1]);"> 显示地图 </a> </td>
            <td style="text-align: justify;">
                待补
            </td>
        </tr>
    </table>
</div>

</body>


<script>
    var canvas = document.getElementById("rance8");
    var ctx = canvas.getContext('2d');

    ctx.strokeRect(0, 0, 105, 105);

    for (var r = 0; r < 4; r++)
        for (var c = 0; c < 4; c++)
            ctx.strokeRect(25*c+5, 25*r+5,  20, 20);

    function load_map(exist, link_r, link_c, start, end) {
        ctx.clearRect(0, 0, 105, 105);
        ctx.strokeRect(1, 1, 103, 103);

        // 多次绘制加深线条
        for (var i = 0; i < 5; i++)
            repeat_load(exist, link_r, link_c, start, end);
    }
    function repeat_load(exist, link_r, link_c, start, end) {
        ctx.fillStyle = "rgba(135, 206, 250, 0.5)";
        for (var r = 0; r < 4; r++)
            for (var c = 0; c < 4; c++) {
                if (exist[r][c] == '1')
                    ctx.fillRect(25*c+5, 25*r+5, 20, 20);
                ctx.strokeRect(25*c+5, 25*r+5,  20, 20);
            }

        for (var r = 0; r < 4; r++)
            for (var c = 0; c < 3; c++)
                if (link_r[r][c] == '1') {
                    ctx.strokeRect(25*(c+1), 25*r+12, 5, 6);
                    ctx.clearRect(25*(c+1)-1, 25*r+13, 7, 4);
                }

        for (var r = 0; r < 3; r++)
            for (var c = 0; c < 4; c++)
                if (link_c[r][c] == '1') {
                    ctx.strokeRect(25*c+12, 25*(r+1), 6, 5);
                    ctx.clearRect(25*c+13, 25*(r+1)-1, 4, 7);
                }

        ctx.fillStyle = "#EEB422";
        ctx.fillRect(25*(start[1]-1)+8, 25*(start[0]-1)+8, 14, 14);

        ctx.fillStyle = "black";
        ctx.font = "16px Georgia";
        ctx.fillText("G", 25*(end[1]-1)+9, 25*end[0]-4);
    }
</script>
